[gd_scene load_steps=12 format=3 uid="uid://btb3ktgnrdtit"]

[ext_resource type="Texture2D" uid="uid://x81840evf2gg" path="res://assets/ui/game_over_border.png" id="1_72q5w"]
[ext_resource type="Script" uid="uid://d2quw7csckdsd" path="res://end_screen/end_screen.gd" id="1_hmshp"]
[ext_resource type="Script" uid="uid://dm7colb1puq7c" path="res://end_screen/highscores_section.gd" id="3_fwhm7"]
[ext_resource type="Script" uid="uid://2nf18myw0mkf" path="res://end_screen/initial.gd" id="3_kpdng"]
[ext_resource type="PackedScene" uid="uid://vqnw6jvlujgw" path="res://effects/transition_rect.tscn" id="3_mkgft"]
[ext_resource type="Texture2D" uid="uid://kmw657lomrwm" path="res://assets/ui/initials_border.png" id="3_q7ipi"]
[ext_resource type="Texture2D" uid="uid://bbc0m5jv1gkf4" path="res://assets/ui/arrow_up.png" id="4_1odwr"]
[ext_resource type="Texture2D" uid="uid://ccbd37lt20el1" path="res://assets/ui/arrow_down.png" id="5_i5gnp"]
[ext_resource type="Script" uid="uid://bvjycsd0dsjwb" path="res://end_screen/ok_label.gd" id="7_fjggk"]

[sub_resource type="Shader" id="Shader_mkgft"]
resource_local_to_scene = true
code = "shader_type canvas_item;

uniform float clear_progress : hint_range(0.0, 1.0) = 0.0; // 0 -> 1 where 1 is fully cleared.

void fragment()
{
    vec4 tex_color = texture(TEXTURE, UV);

	// Figure out which pixel we are in the texture (integer coords) and if they are odd/even.
    ivec2 px = ivec2(floor(UV / TEXTURE_PIXEL_SIZE));
    int x_odd = px.x & 1;
    int y_odd = px.y & 1;
    
    float sweepA = (UV.x + UV.y) * 0.5;
	float sweepB = (UV.x + (1.0 - UV.y)) * 0.5;
	float sweepC = ((1.0 - UV.x) + UV.y) * 0.5;
	float sweepD = ((1.0 - UV.x) + (1.0 - UV.y)) * 0.5;

	float sweep = sweepA;
    if (x_odd == 1 && y_odd == 1) {
        sweep = sweepB;
    } else if (x_odd == 1 && y_odd == 0) {
        sweep = sweepC;
    } else if (x_odd == 0 && y_odd == 1) {
        sweep = sweepD;
    }
    
    if (sweep <= clear_progress) {
        // Cleared pixel â†’ make transparent
        COLOR = vec4(tex_color.rgb, 0.0);
    } else {
        // Black with full alpha.
        COLOR = vec4(0.0, 0.0, 0.0, 1.0);
    }
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_fwhm7"]
resource_local_to_scene = true
shader = SubResource("Shader_mkgft")
shader_parameter/clear_progress = 1.0

[node name="EndScreen" type="Control"]
custom_minimum_size = Vector2(320, 180)
layout_mode = 3
anchors_preset = 0
offset_right = 320.0
offset_bottom = 180.0
script = ExtResource("1_hmshp")
metadata/_edit_vertical_guides_ = [320.0, 160.0]
metadata/_edit_horizontal_guides_ = [180.0, 90.0]

[node name="GameOverLabel" type="Label" parent="."]
layout_mode = 0
offset_top = 12.0
offset_right = 320.0
offset_bottom = 28.0
theme_override_font_sizes/font_size = 16
text = "GAME OVER"
horizontal_alignment = 1

[node name="Sprite2D" type="Sprite2D" parent="GameOverLabel"]
position = Vector2(84, -4)
texture = ExtResource("1_72q5w")
centered = false

[node name="ScoreGroup" type="Control" parent="."]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="ScoreLabel" type="Label" parent="ScoreGroup"]
layout_mode = 0
offset_left = 100.0
offset_top = 40.0
offset_right = 188.0
offset_bottom = 48.0
text = "SCORE"

[node name="Score" type="Label" parent="ScoreGroup"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 140.0
offset_top = 40.0
offset_right = 220.0
offset_bottom = 48.0
text = "99999"
horizontal_alignment = 2

[node name="NewHighscoreScreen" type="Control" parent="."]
unique_name_in_owner = true
anchors_preset = 0
offset_right = 320.0
offset_bottom = 180.0

[node name="CongratulationsLabel1" type="Label" parent="NewHighscoreScreen"]
layout_mode = 0
offset_left = 24.0
offset_top = 64.0
offset_right = 296.0
offset_bottom = 94.0
text = "CONGRATULATIONS!"
horizontal_alignment = 1

[node name="CongratulationsLabel2" type="Label" parent="NewHighscoreScreen"]
layout_mode = 0
offset_left = 24.0
offset_top = 80.0
offset_right = 296.0
offset_bottom = 110.0
text = "YOU'VE MADE IT TO THE LEADERBOARD.
ENTER YOU INITIALS:"

[node name="Initial0" type="Label" parent="NewHighscoreScreen"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 133.0
offset_top = 120.0
offset_right = 149.0
offset_bottom = 136.0
theme_override_font_sizes/font_size = 16
text = "A"
script = ExtResource("3_kpdng")

[node name="SelectionVisuals" type="Control" parent="NewHighscoreScreen/Initial0"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Border" type="TextureRect" parent="NewHighscoreScreen/Initial0/SelectionVisuals"]
layout_mode = 0
offset_left = -4.0
offset_top = -4.0
offset_right = 18.0
offset_bottom = 18.0
texture = ExtResource("3_q7ipi")

[node name="ArrowUp" type="TextureRect" parent="NewHighscoreScreen/Initial0/SelectionVisuals"]
layout_mode = 0
offset_left = 3.0
offset_top = -11.0
offset_right = 11.0
offset_bottom = -5.0
texture = ExtResource("4_1odwr")

[node name="ArrowDown" type="TextureRect" parent="NewHighscoreScreen/Initial0/SelectionVisuals"]
layout_mode = 0
offset_left = 3.0
offset_top = 19.0
offset_right = 11.0
offset_bottom = 25.0
texture = ExtResource("5_i5gnp")

[node name="Initial1" type="Label" parent="NewHighscoreScreen"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 153.0
offset_top = 120.0
offset_right = 169.0
offset_bottom = 136.0
theme_override_font_sizes/font_size = 16
text = "A"
script = ExtResource("3_kpdng")

[node name="SelectionVisuals" type="Control" parent="NewHighscoreScreen/Initial1"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Border" type="TextureRect" parent="NewHighscoreScreen/Initial1/SelectionVisuals"]
layout_mode = 0
offset_left = -4.0
offset_top = -4.0
offset_right = 18.0
offset_bottom = 18.0
texture = ExtResource("3_q7ipi")

[node name="ArrowUp" type="TextureRect" parent="NewHighscoreScreen/Initial1/SelectionVisuals"]
layout_mode = 0
offset_left = 3.0
offset_top = -11.0
offset_right = 11.0
offset_bottom = -5.0
texture = ExtResource("4_1odwr")

[node name="ArrowDown" type="TextureRect" parent="NewHighscoreScreen/Initial1/SelectionVisuals"]
layout_mode = 0
offset_left = 3.0
offset_top = 19.0
offset_right = 11.0
offset_bottom = 25.0
texture = ExtResource("5_i5gnp")

[node name="Initial2" type="Label" parent="NewHighscoreScreen"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 173.0
offset_top = 120.0
offset_right = 189.0
offset_bottom = 136.0
theme_override_font_sizes/font_size = 16
text = "A"
script = ExtResource("3_kpdng")

[node name="SelectionVisuals" type="Control" parent="NewHighscoreScreen/Initial2"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Border" type="TextureRect" parent="NewHighscoreScreen/Initial2/SelectionVisuals"]
layout_mode = 0
offset_left = -4.0
offset_top = -4.0
offset_right = 18.0
offset_bottom = 18.0
texture = ExtResource("3_q7ipi")

[node name="ArrowUp" type="TextureRect" parent="NewHighscoreScreen/Initial2/SelectionVisuals"]
layout_mode = 0
offset_left = 3.0
offset_top = -11.0
offset_right = 11.0
offset_bottom = -5.0
texture = ExtResource("4_1odwr")

[node name="ArrowDown" type="TextureRect" parent="NewHighscoreScreen/Initial2/SelectionVisuals"]
layout_mode = 0
offset_left = 3.0
offset_top = 19.0
offset_right = 11.0
offset_bottom = 25.0
texture = ExtResource("5_i5gnp")

[node name="OKLabel" type="Label" parent="NewHighscoreScreen"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 197.0
offset_top = 120.0
offset_right = 213.0
offset_bottom = 136.0
text = "OK"
vertical_alignment = 1
script = ExtResource("7_fjggk")

[node name="SelectionVisuals" type="Control" parent="NewHighscoreScreen/OKLabel"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Border" type="TextureRect" parent="NewHighscoreScreen/OKLabel/SelectionVisuals"]
layout_mode = 0
offset_left = -4.0
offset_top = -4.0
offset_right = 18.0
offset_bottom = 18.0
texture = ExtResource("3_q7ipi")

[node name="StatisticsScreen" type="Control" parent="."]
unique_name_in_owner = true
visible = false
anchors_preset = 0
offset_right = 320.0
offset_bottom = 180.0

[node name="StatisticsSection" type="Control" parent="StatisticsScreen"]
anchors_preset = 0
offset_top = 108.0
offset_right = 160.0
offset_bottom = 164.0

[node name="StagesClearedLabel" type="Label" parent="StatisticsScreen/StatisticsSection"]
layout_mode = 0
offset_left = 80.0
offset_top = -52.0
offset_right = 200.0
offset_bottom = -44.0
text = "STAGES CLEARED"

[node name="StagesCleared" type="Label" parent="StatisticsScreen/StatisticsSection"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 128.0
offset_top = -52.0
offset_right = 240.0
offset_bottom = -44.0
text = "12"
horizontal_alignment = 2

[node name="PlaytimeLabel" type="Label" parent="StatisticsScreen/StatisticsSection"]
layout_mode = 0
offset_left = 80.0
offset_top = -40.0
offset_right = 200.0
offset_bottom = -32.0
text = "PLAY TIME"

[node name="Playtime" type="Label" parent="StatisticsScreen/StatisticsSection"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 128.0
offset_top = -40.0
offset_right = 240.0
offset_bottom = -32.0
text = "01:45"
horizontal_alignment = 2

[node name="FoodEatenLabel" type="Label" parent="StatisticsScreen/StatisticsSection"]
layout_mode = 0
offset_left = 80.0
offset_top = -28.0
offset_right = 192.0
offset_bottom = -20.0
text = "FOOD EATEN"

[node name="FoodEaten" type="Label" parent="StatisticsScreen/StatisticsSection"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 128.0
offset_top = -28.0
offset_right = 240.0
offset_bottom = -20.0
text = "132"
horizontal_alignment = 2

[node name="HighscoresSection" type="Control" parent="StatisticsScreen"]
anchors_preset = 0
offset_left = 76.0
offset_top = 88.0
offset_right = 236.0
offset_bottom = 176.0
script = ExtResource("3_fwhm7")

[node name="HighscoresHeadingLabel" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = -76.0
offset_top = 12.0
offset_right = 244.0
offset_bottom = 20.0
text = "HIGHSCORES"
horizontal_alignment = 1

[node name="Highscore1Label" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 8.0
offset_top = 24.0
offset_right = 48.0
offset_bottom = 32.0
text = "1ST"
horizontal_alignment = 2

[node name="Highscore1" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 20.0
offset_top = 24.0
offset_right = 112.0
offset_bottom = 32.0
text = "9999999"
horizontal_alignment = 2

[node name="Name1" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 120.0
offset_top = 24.0
offset_right = 212.0
offset_bottom = 32.0
text = "ZPX"

[node name="Highscore2Label" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 8.0
offset_top = 36.0
offset_right = 48.0
offset_bottom = 44.0
text = "2ND"
horizontal_alignment = 2

[node name="Highscore2" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 20.0
offset_top = 36.0
offset_right = 112.0
offset_bottom = 44.0
text = "99999"
horizontal_alignment = 2

[node name="Name2" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 120.0
offset_top = 36.0
offset_right = 212.0
offset_bottom = 44.0
text = "ZPX"

[node name="Highscore3Label" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 8.0
offset_top = 48.0
offset_right = 48.0
offset_bottom = 56.0
text = "3RD"
horizontal_alignment = 2

[node name="Highscore3" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 20.0
offset_top = 48.0
offset_right = 112.0
offset_bottom = 56.0
text = "9999"
horizontal_alignment = 2

[node name="Name3" type="Label" parent="StatisticsScreen/HighscoresSection"]
layout_mode = 0
offset_left = 120.0
offset_top = 48.0
offset_right = 212.0
offset_bottom = 56.0
text = "ZPX"

[node name="TransitionRect" parent="." instance=ExtResource("3_mkgft")]
material = SubResource("ShaderMaterial_fwhm7")
layout_mode = 0
